<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • anomalyDetection</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">anomalyDetection</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/koalaverse/anomalyDetection">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction</h1>
            
            <h4 class="date">2018-06-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/koalaverse/anomalyDetection/blob/master/vignettes/Introduction.Rmd"><code>vignettes/Introduction.Rmd</code></a></small>
      <div class="hidden name"><code>Introduction.Rmd</code></div>

    </div>

    
    
<p>As the number of cyber-attacks continues to grow on a daily basis, so does the delay in threat detection. For instance, in 2015, the Office of Personnel Management (OPM) discovered that approximately <a href="https://www.opm.gov/cybersecurity/cybersecurity-incidents">21.5 million individual records of Federal employees and contractors had been stolen</a>. On average, the time between an attack and its discovery is <a href="https://www.wired.com/2016/10/inside-cyberattack-shocked-us-government/">more than 200 days</a>. In the case of the OPM breach, the attack had been going on for almost a year. Currently, cyber analysts inspect numerous potential incidents on a daily basis, but have neither the time nor the resources available to perform such a task. <code>anomalyDetection</code> aims to curtail the time frame in which cyber-attacks go unnoticed and to aid in the discovery of these attacks among the millions of daily logged events, while minimizing the number of false positives and negatives. By incorporating a tabular vector approach along with multivariate analysis functionality, <code>anomalyDetection</code> provides cyber analysts the ability to effectively and efficiently identify time periods associated with suspected anomalies for further evaluation.</p>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<p><code>anomalyDetection</code> provides 13 functions to aid in the detection of potential cyber anomalies:</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="18%">
<col width="80%">
</colgroup>
<thead><tr class="header">
<th align="left">Function</th>
<th align="left">Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>tabulated_state_vector</code></td>
<td align="left">Employs a tabulated vector approach to transform security log data into unique counts of data attributes based on time blocks.</td>
</tr>
<tr class="even">
<td align="left"><code>block_inspect</code></td>
<td align="left">Creates a list where the original data has been divided into blocks denoted in the state vector.</td>
</tr>
<tr class="odd">
<td align="left"><code>mc_adjust</code></td>
<td align="left">Handles issues with multi-collinearity.</td>
</tr>
<tr class="even">
<td align="left"><code>mahalanobis_distance</code></td>
<td align="left">Calculates the distance between the elements in data and the mean vector of the data for outlier detection.</td>
</tr>
<tr class="odd">
<td align="left"><code>bd_row</code></td>
<td align="left">Indicates which variables in data are driving the Mahalanobis distance for a specific row, relative to the mean vector of the data.</td>
</tr>
<tr class="even">
<td align="left"><code>horns_curve</code></td>
<td align="left">Computes <a href="https://link.springer.com/article/10.1007/BF02289447">Horn’s Parallel Analysis</a> to determine the factors to retain within a factor analysis.</td>
</tr>
<tr class="odd">
<td align="left"><code>factor_analysis</code></td>
<td align="left">Reduces the structure of the data by relating the correlation between variables to a set of factors, using the eigen-decomposition of the correlation matrix.</td>
</tr>
<tr class="even">
<td align="left"><code>factor_analysis_results</code></td>
<td align="left">Provides easy access to factor analysis results.</td>
</tr>
<tr class="odd">
<td align="left"><code>kaisers_index</code></td>
<td align="left">Computes scores designed to assess the quality of a factor analysis solution. It measures the tendency towards unifactoriality for both a given row and the entire matrix as a whole.</td>
</tr>
<tr class="even">
<td align="left"><code>principal_components</code></td>
<td align="left">Relates the data to a set of a components through the eigen-decomposition of the correlation matrix, where each component explains some variance of the data.</td>
</tr>
<tr class="odd">
<td align="left"><code>principal_components_results</code></td>
<td align="left">Provides easy access to principal component analysis results.</td>
</tr>
<tr class="even">
<td align="left"><code>get_all_factors</code></td>
<td align="left">finds all factor pairs for a given integer.</td>
</tr>
</tbody>
</table>
<p><code>anomalyDetection</code> also incorporates the pipe operator (<code>%&gt;%</code>) from the <a href="https://CRAN.R-project.org/package=magrittr">magrittr package</a> for streamlining function composition. To illustrate the functionality of <code>anomalyDetection</code> we will use the <code>security_logs</code> data that mimics common information that appears in security logs and comes with <code>anomalyDetection</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)            <span class="co"># common data manipulations</span>
<span class="kw">library</span>(tidyr)            <span class="co"># common data manipulations</span>
<span class="kw">library</span>(tibble)           <span class="co"># turning output into convenient tibble</span>
<span class="kw">library</span>(ggplot2)          <span class="co"># visualizations</span>
<span class="kw">library</span>(anomalyDetection)

security_logs
## # A tibble: 300 x 10
##    Device_Vendor Device_Product Device_Action Src_IP    Dst_IP    Src_Port
##    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;        &lt;int&gt;
##  1 McAfee        NSP            Attempt       223.70.1… 32.73.26…      135
##  2 CISCO         ASA            Failure       174.110.… 219.142.…       80
##  3 IBM           SNIPS          Success       174.110.… 145.114.…       80
##  4 McAfee        NSP            Success       227.12.1… 151.194.…       21
##  5 Juniper       SRX            Success       28.9.24.… 145.114.…      135
##  6 McAfee        NSP            Success       28.9.24.… 145.114.…       80
##  7 McAfee        NSP            Attempt       28.9.24.… 56.137.1…       80
##  8 McAfee        ePO            Attempt       223.70.1… 151.194.…       25
##  9 McAfee        ePO            Attempt       174.110.… 151.194.…       25
## 10 CISCO         ASA            Attempt       227.12.1… 56.137.1…       25
## # ... with 290 more rows, and 4 more variables: Dst_Port &lt;int&gt;,
## #   Protocol &lt;chr&gt;, Country_Src &lt;chr&gt;, Bytes_TRF &lt;int&gt;</code></pre></div>
</div>
<div id="state-vector-creation" class="section level2">
<h2 class="hasAnchor">
<a href="#state-vector-creation" class="anchor"></a>State Vector Creation</h2>
<p>To apply the statistical methods that we’ll see in the sections that follow, we employ the tabulated vector approach. This approach transforms the security log data into unique counts of data attributes based on pre-defined time blocks. Therefore, as each time block is generated, the categorical fields are separated by their levels and a count of occurrences for each level are recorded into a vector. All numerical fields, such as bytes in and bytes out, are recorded as a summation within the time block. The result is what we call a “state vector matrix”.</p>
<p>Thus, for our <code>security_logs</code> data we can create our state vector matrix based on our data being divided into 10 time blocks. What results is the summary of instances for each categorical level in our data for each time block. Consequently, row one represents the first time block and there were 2 instances of CISCO as the device vendor, 1 instances of IBM, etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/tabulate_state_vector.html">tabulate_state_vector</a></span>(security_logs, <span class="dv">10</span>)
## Some variables contain more than 50 levels. Only the 10 most popular levels of these variables will be tabulated.
## # A tibble: 30 x 54
##      ASA Attempt Bytes_TRF_102 Bytes_TRF_120 Bytes_TRF_160 Bytes_TRF_200
##    &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
##  1     2       5             0             1             1             0
##  2     0       4             1             0             0             1
##  3     2       3             0             0             1             0
##  4     5       0             0             1             0             0
##  5     3       3             0             0             0             0
##  6     2       4             0             0             0             0
##  7     2       3             1             0             0             0
##  8     3       6             0             0             0             1
##  9     0       4             0             1             0             0
## 10     2       3             1             0             0             0
## # ... with 20 more rows, and 48 more variables: Bytes_TRF_208 &lt;dbl&gt;,
## #   Bytes_TRF_60 &lt;dbl&gt;, Bytes_TRF_64 &lt;dbl&gt;, Bytes_TRF_70 &lt;dbl&gt;,
## #   Bytes_TRF_72 &lt;dbl&gt;, Bytes_TRF_80 &lt;dbl&gt;, Bytes_TRF_90 &lt;dbl&gt;,
## #   China &lt;dbl&gt;, CISCO &lt;dbl&gt;, Dst_IP_145.114.4.203 &lt;dbl&gt;,
## #   Dst_IP_151.194.233.198 &lt;dbl&gt;, Dst_IP_219.142.109.8 &lt;dbl&gt;,
## #   Dst_IP_32.73.26.223 &lt;dbl&gt;, Dst_IP_56.137.121.203 &lt;dbl&gt;,
## #   Dst_Port_20000 &lt;dbl&gt;, Dst_Port_25 &lt;dbl&gt;, Dst_Port_593 &lt;dbl&gt;,
## #   Dst_Port_80 &lt;dbl&gt;, Dst_Port_90 &lt;dbl&gt;, ePO &lt;dbl&gt;, Failure &lt;dbl&gt;,
## #   Firewall &lt;dbl&gt;, IBM &lt;dbl&gt;, India &lt;dbl&gt;, Juniper &lt;dbl&gt;, Korea &lt;dbl&gt;,
## #   McAfee &lt;dbl&gt;, Netherlands &lt;dbl&gt;, NSP &lt;dbl&gt;, `Palo Alto
## #   Networks` &lt;dbl&gt;, Russia &lt;dbl&gt;, SNIPS &lt;dbl&gt;,
## #   Src_IP_174.110.206.174 &lt;dbl&gt;, Src_IP_223.70.128.61 &lt;dbl&gt;,
## #   Src_IP_227.12.127.87 &lt;dbl&gt;, Src_IP_28.9.24.154 &lt;dbl&gt;,
## #   Src_IP_89.130.69.91 &lt;dbl&gt;, Src_Port_113 &lt;dbl&gt;, Src_Port_135 &lt;dbl&gt;,
## #   Src_Port_21 &lt;dbl&gt;, Src_Port_25 &lt;dbl&gt;, Src_Port_80 &lt;dbl&gt;, SRX &lt;dbl&gt;,
## #   Success &lt;dbl&gt;, TCP &lt;dbl&gt;, UDP &lt;dbl&gt;, `United Kingdom` &lt;dbl&gt;, US &lt;dbl&gt;</code></pre></div>
</div>
<div id="multicollinearity-adjustment" class="section level2">
<h2 class="hasAnchor">
<a href="#multicollinearity-adjustment" class="anchor"></a>Multicollinearity Adjustment</h2>
<p>Prior to proceeding with any multivariate statistical analyses we should inspect the state vector for multicollinearity, to avoid issues such as matrix singularity, rank deficiency, and strong correlation values, and remove any columns that pose an issue. We can use <code>mc_adjust</code> to handle issues with multi-collinearity by first removing any columns whose variance is close to or less than a minimum level of variance (<code>min_var</code>). Then, it removes linearly dependent columns. Finally, it removes any columns that have a high absolute correlation value equal to or greater than <code>max_cor</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(state_vec &lt;-<span class="st"> </span>security_logs <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/tabulate_state_vector.html">tabulate_state_vector</a></span>(<span class="dv">10</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/mc_adjust.html">mc_adjust</a></span>())
## Some variables contain more than 50 levels. Only the 10 most popular levels of these variables will be tabulated.
## # A tibble: 30 x 49
##      ASA Attempt Bytes_TRF_102 Bytes_TRF_120 Bytes_TRF_160 Bytes_TRF_200
##    &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
##  1     2       5             0             1             1             0
##  2     0       4             1             0             0             1
##  3     2       3             0             0             1             0
##  4     5       0             0             1             0             0
##  5     3       3             0             0             0             0
##  6     2       4             0             0             0             0
##  7     2       3             1             0             0             0
##  8     3       6             0             0             0             1
##  9     0       4             0             1             0             0
## 10     2       3             1             0             0             0
## # ... with 20 more rows, and 43 more variables: Bytes_TRF_208 &lt;dbl&gt;,
## #   Bytes_TRF_60 &lt;dbl&gt;, Bytes_TRF_64 &lt;dbl&gt;, Bytes_TRF_70 &lt;dbl&gt;,
## #   Bytes_TRF_72 &lt;dbl&gt;, Bytes_TRF_80 &lt;dbl&gt;, Bytes_TRF_90 &lt;dbl&gt;,
## #   China &lt;dbl&gt;, Dst_IP_145.114.4.203 &lt;dbl&gt;, Dst_IP_151.194.233.198 &lt;dbl&gt;,
## #   Dst_IP_219.142.109.8 &lt;dbl&gt;, Dst_IP_32.73.26.223 &lt;dbl&gt;,
## #   Dst_IP_56.137.121.203 &lt;dbl&gt;, Dst_Port_20000 &lt;dbl&gt;, Dst_Port_25 &lt;dbl&gt;,
## #   Dst_Port_593 &lt;dbl&gt;, Dst_Port_80 &lt;dbl&gt;, Dst_Port_90 &lt;dbl&gt;, ePO &lt;dbl&gt;,
## #   Failure &lt;dbl&gt;, Firewall &lt;dbl&gt;, IBM &lt;dbl&gt;, India &lt;dbl&gt;, Juniper &lt;dbl&gt;,
## #   Korea &lt;dbl&gt;, McAfee &lt;dbl&gt;, Netherlands &lt;dbl&gt;, NSP &lt;dbl&gt;, Russia &lt;dbl&gt;,
## #   Src_IP_174.110.206.174 &lt;dbl&gt;, Src_IP_223.70.128.61 &lt;dbl&gt;,
## #   Src_IP_227.12.127.87 &lt;dbl&gt;, Src_IP_28.9.24.154 &lt;dbl&gt;,
## #   Src_IP_89.130.69.91 &lt;dbl&gt;, Src_Port_113 &lt;dbl&gt;, Src_Port_135 &lt;dbl&gt;,
## #   Src_Port_21 &lt;dbl&gt;, Src_Port_25 &lt;dbl&gt;, Src_Port_80 &lt;dbl&gt;,
## #   Success &lt;dbl&gt;, TCP &lt;dbl&gt;, `United Kingdom` &lt;dbl&gt;, US &lt;dbl&gt;</code></pre></div>
<p>By default, <code>mc_adjust</code> removes <em>all</em> columns that violate the variance, dependency, and correlation thresholds. Alternatively, we can use <code>action = "select"</code> as an argument, which provides interactivity where the user can select the variables that violate the correlation threshold that they would like to remove.</p>
</div>
<div id="multivariate-statistical-analyses" class="section level2">
<h2 class="hasAnchor">
<a href="#multivariate-statistical-analyses" class="anchor"></a>Multivariate Statistical Analyses</h2>
<p>With our data adjusted for multicollinearity we can now proceed with multivariate analyses to identify anomalies. First we’ll use the <code>mahalanobis_distance</code> function to compare the distance between each observation by its distance from the data mean, independent of scale. This is computed as</p>
<p><span class="math display">\[MD = \sqrt{(x - \bar{x})C^{-1}(x-\bar{x})} \tag{1}\]</span></p>
<p>where <span class="math inline">\(x\)</span> is a vector of <span class="math inline">\(p\)</span> observations, <span class="math inline">\(x=(x_1, \dots, x_p)\)</span>, <span class="math inline">\(\bar{x}\)</span> is the mean vector of the data, <span class="math inline">\(\bar{x}=(\bar{x}_1, \dots, \bar{x}_p)\)</span>, and <span class="math inline">\(C^{-1}\)</span> is the inverse data covariance matrix.</p>
<p>Here, we include <code>output = "both"</code> to return both the Mahalanobis distance and the absolute breakdown distances and <code>normalize = TRUE</code> so that we can compare relative magnitudes across our data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/mahalanobis_distance.html">mahalanobis_distance</a></span>(<span class="st">"both"</span>, <span class="dt">normalize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>as_tibble
## # A tibble: 30 x 50
##       MD  ASA_BD Attempt_BD Bytes_TRF_102_BD Bytes_TRF_120_BD
##    &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1  28.0 0.00554    0.0109            0.0964           0.440 
##  2  28.0 0.0247     0.00378           0.627            0.0879
##  3  28.0 0.00554    0.00330           0.0964           0.0879
##  4  28.0 0.0508     0.0245            0.0964           0.440 
##  5  28.0 0.0206     0.00330           0.0964           0.0879
##  6  28.0 0.00554    0.00378           0.0964           0.0879
##  7  28.0 0.00554    0.00330           0.627            0.0879
##  8  28.0 0.0206     0.0179            0.0964           0.0879
##  9  28.0 0.0247     0.00378           0.0964           0.440 
## 10  28.0 0.00554    0.00330           0.627            0.0879
## # ... with 20 more rows, and 45 more variables: Bytes_TRF_160_BD &lt;dbl&gt;,
## #   Bytes_TRF_200_BD &lt;dbl&gt;, Bytes_TRF_208_BD &lt;dbl&gt;, Bytes_TRF_60_BD &lt;dbl&gt;,
## #   Bytes_TRF_64_BD &lt;dbl&gt;, Bytes_TRF_70_BD &lt;dbl&gt;, Bytes_TRF_72_BD &lt;dbl&gt;,
## #   Bytes_TRF_80_BD &lt;dbl&gt;, Bytes_TRF_90_BD &lt;dbl&gt;, China_BD &lt;dbl&gt;,
## #   Dst_IP_145.114.4.203_BD &lt;dbl&gt;, Dst_IP_151.194.233.198_BD &lt;dbl&gt;,
## #   Dst_IP_219.142.109.8_BD &lt;dbl&gt;, Dst_IP_32.73.26.223_BD &lt;dbl&gt;,
## #   Dst_IP_56.137.121.203_BD &lt;dbl&gt;, Dst_Port_20000_BD &lt;dbl&gt;,
## #   Dst_Port_25_BD &lt;dbl&gt;, Dst_Port_593_BD &lt;dbl&gt;, Dst_Port_80_BD &lt;dbl&gt;,
## #   Dst_Port_90_BD &lt;dbl&gt;, ePO_BD &lt;dbl&gt;, Failure_BD &lt;dbl&gt;,
## #   Firewall_BD &lt;dbl&gt;, IBM_BD &lt;dbl&gt;, India_BD &lt;dbl&gt;, Juniper_BD &lt;dbl&gt;,
## #   Korea_BD &lt;dbl&gt;, McAfee_BD &lt;dbl&gt;, Netherlands_BD &lt;dbl&gt;, NSP_BD &lt;dbl&gt;,
## #   Russia_BD &lt;dbl&gt;, Src_IP_174.110.206.174_BD &lt;dbl&gt;,
## #   Src_IP_223.70.128.61_BD &lt;dbl&gt;, Src_IP_227.12.127.87_BD &lt;dbl&gt;,
## #   Src_IP_28.9.24.154_BD &lt;dbl&gt;, Src_IP_89.130.69.91_BD &lt;dbl&gt;,
## #   Src_Port_113_BD &lt;dbl&gt;, Src_Port_135_BD &lt;dbl&gt;, Src_Port_21_BD &lt;dbl&gt;,
## #   Src_Port_25_BD &lt;dbl&gt;, Src_Port_80_BD &lt;dbl&gt;, Success_BD &lt;dbl&gt;,
## #   TCP_BD &lt;dbl&gt;, `United Kingdom_BD` &lt;dbl&gt;, US_BD &lt;dbl&gt;</code></pre></div>
<p>We can use this information in a modified heatmap visualization to identify outlier values across our security log attributes and time blocks. The larger and brighter the dot the more significant the outlier is and deserves attention.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/mahalanobis_distance.html">mahalanobis_distance</a></span>(<span class="st">"both"</span>, <span class="dt">normalize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>as_tibble <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">Block =</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/gather">gather</a></span>(Variable, BD, <span class="op">-</span><span class="kw">c</span>(MD, Block)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="kw">factor</span>(Block), Variable, <span class="dt">color =</span> MD, <span class="dt">size =</span> BD)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-6-1.png" width="864" style="display: block; margin: auto;"></p>
<p>We can build onto this with the <code>bd_row</code> to identify which security log attributes in the data are driving the Mahalanobis distance. <code>bd_row</code> measures the relative contribution of each variable, <span class="math inline">\(x_i\)</span>, to <span class="math inline">\(MD\)</span> by computing</p>
<p><span class="math display">\[BD_i = \Bigg|\frac{x_i - \bar{x}_i}{\sqrt{C_{ii}}} \Bigg| \tag{2}\]</span></p>
<p>where <span class="math inline">\(C_{ii}\)</span> is the variance of <span class="math inline">\(x_i\)</span>. Furthermore, <code>bd_row</code> will look at a specified row and rank-order the columns by those that are driving the Mahalanobis distance. For example, the plot above identified block 17 as having the largest Mahalanobis distance suggesting some abnormal activity may be occuring during that time block. We can drill down into that block and look at the top 10 security log attributes that are driving the Mahalanobis distance as these may be areas that require further investigation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/mahalanobis_distance.html">mahalanobis_distance</a></span>(<span class="st">"bd"</span>, <span class="dt">normalize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/bd_row.html">bd_row</a></span>(<span class="dv">17</span>, <span class="dv">10</span>)
##         Bytes_TRF_60_BD          Src_Port_21_BD         Src_Port_135_BD 
##                2.198484                2.171581                2.121436 
##         Dst_Port_593_BD       Dst_Port_20000_BD  Dst_IP_32.73.26.223_BD 
##                1.621824                1.414906                1.339865 
##          Dst_Port_90_BD Src_IP_223.70.128.61_BD               McAfee_BD 
##                1.292168                1.237615                1.082842 
##                  IBM_BD 
##                1.037221</code></pre></div>
<p>Next, we can use factor analysis by first exploring the factor loadings (correlations between the columns of the state vector matrix and the suggested factors) and then comparing the factor scores against one another for anomaly detection. Factor analysis is another dimensionality reduction technique designed to identify underlying structure of the data. Factor analysis relates the correlations between variables through a set of factors to link together seemingly unrelated variables. The basic factor analysis model is</p>
<p><span class="math display">\[ X= Λf+e \tag{3}\]</span></p>
<p>where <span class="math inline">\(X\)</span> is the vector of responses <span class="math inline">\(X = (x_1, \dots, x_p)\)</span>, <span class="math inline">\(f\)</span> are the common factors <span class="math inline">\(f = (f_1, \dots, f_q)\)</span>, <span class="math inline">\(e\)</span> is the unique factors <span class="math inline">\(e = (e_1, \dots, e_p)\)</span>, and <span class="math inline">\(Λ\)</span> is the factor loadings. For the desired results, <code>anomalyDetection</code> uses the correlation matrix. Factor loadings are correlations between the factors and the original data and can thus range from -1 to 1, which indicate how much that factor affects each variable. Values close to 0 imply a weak effect on the variable.</p>
<p>A factor loadings matrix can be computed to understand how each original data variable is related to the resultant factors. This can be computed as</p>
<p><span class="math display">\[ Λ = \bigg[\sqrt{λ_1}*e_1,\dots,\sqrt{λ_p}*e_p \bigg] \tag{4}\]</span> where <span class="math inline">\(λ_1\)</span> is the eigenvalue for each factor, <span class="math inline">\(e_i\)</span> is the eigenvector for each factor, and <span class="math inline">\(p\)</span> is the number of columns. Factor scores are used to examine the behavior of the observations relative to each factor and can be used to identify anomaly detection. Factor scores are calculated as</p>
<p><span class="math display">\[ \hat{f} ̂= X_s R^{-1} Λ \tag{5}\]</span></p>
<p>where <span class="math inline">\(X_s\)</span> is the standardized observations, <span class="math inline">\(R^{-1}\)</span> is the inverse of the correlation matrix, and $ $ is the factor loadings matrix. To simplify the results for interpretation, the factor loadings can undergo an orthogonal or oblique rotation. Orthogonal rotations assume independence between the factors while oblique rotations allow the factors to correlate. <code>anomalyDetection</code> utilizes the most common rotation option known as varimax. Varimax rotates the factors orthogonally to maximize the variance of the squared factor loadings which forces large factors to increase and small ones to decrease, providing easier interpretation.</p>
<p>To begin using factor analysis, the dimensions of the reduced state vector matrix are first passed to the <code>horns_curve</code> function to find the recommended set of eigenvalues.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>(state_vec)
##  [1]  4.878016e+00  4.303062e+00  3.877053e+00  3.536650e+00  3.235012e+00
##  [6]  2.964519e+00  2.728217e+00  2.510677e+00  2.299107e+00  2.112608e+00
## [11]  1.935380e+00  1.774756e+00  1.618505e+00  1.477132e+00  1.340807e+00
## [16]  1.211372e+00  1.087453e+00  9.755744e-01  8.696106e-01  7.726981e-01
## [21]  6.807284e-01  5.947711e-01  5.116986e-01  4.353286e-01  3.652337e-01
## [26]  2.986222e-01  2.362019e-01  1.777729e-01  1.196026e-01  1.099229e-15
## [31]  8.486189e-16  6.889096e-16  5.644668e-16  4.588364e-16  3.631992e-16
## [36]  2.748938e-16  1.928609e-16  1.132566e-16  3.552007e-17 -4.103825e-17
## [41] -1.202947e-16 -1.981430e-16 -2.808249e-16 -3.665819e-16 -4.606614e-16
## [46] -5.700066e-16 -6.955580e-16 -8.650080e-16 -1.108035e-15</code></pre></div>
<p>Next, the dimensionality is determined by finding the eigenvalues of the correlation matrix of the state vector matrix and retaining only those factors whose eigenvalues are greater than or equal to those produced by <code>horns_curve</code>. We use <code>factor_analysis</code> to reduce the state vector matrix into resultant factors. The <code>factor_analysis</code> function generates a list containing five outputs:</p>
<ol style="list-style-type: decimal">
<li>
<code>fa_loadings</code>: numerical matrix with the original factor loadings</li>
<li>
<code>fa_scores</code>: numerical matrix with the row scores for each factor</li>
<li>
<code>fa_loadings_rotated</code>: numerical matrix with the varimax rotated factor loadings</li>
<li>
<code>fa_scores_rotated</code>: numerical matrix with the row scores for each varimax rotated factor</li>
<li>
<code>num_factors</code>: numeric vector identifying the number of factors</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis.html">factor_analysis</a></span>(state_vec, <span class="dt">hc_points =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span>str
## List of 5
##  $ fa_loadings        : num [1:49, 1:15] -0.2823 0.1965 -0.0938 -0.108 0.0458 ...
##  $ fa_scores          : num [1:30, 1:15] 1.257 -0.544 -0.442 -1.114 0.446 ...
##  $ fa_loadings_rotated: num [1:49, 1:15] -0.0313 0.0835 -0.1139 0.2286 -0.0533 ...
##  $ fa_scores_rotated  : num [1:30, 1:15] 0.2443 1.6757 0.0508 0.404 0.3386 ...
##  $ num_factors        : int 15</code></pre></div>
<p>For easy access to these results we can use the <code>factor_analysis_results</code> parsing function. The <code>factor_analysis_results</code> will parse the results either by their list name or by location. For instance to extract the rotated factor scores you can use <code><a href="../reference/factor_analysis_results.html">factor_analysis_results(data, results = fa_scores_rotated)</a></code> or <code><a href="../reference/factor_analysis_results.html">factor_analysis_results(data, results = 4)</a></code> as demonstrated below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis.html">factor_analysis</a></span>(state_vec, <span class="dt">hc_points =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis_results.html">factor_analysis_results</a></span>(<span class="dv">4</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>as_tibble
## # A tibble: 30 x 16
##         V1     V2     V3      V4      V5      V6     V7      V8      V9
##      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1  1.61    0.240 -0.150 -0.0880 -0.326  -1.13    2.43  -0.808  -0.0687
##  2 -1.08    0.169  2.18   1.40   -1.08    0.0738  0.385  1.44    1.54  
##  3 -1.21    1.24   0.400  0.408   0.511   0.0768  1.51  -0.306  -0.529 
##  4 -1.85   -1.31  -1.03   0.629  -0.347   2.06   -0.514 -1.58   -0.0344
##  5  0.224  -1.22   0.231  0.157  -0.0906 -0.331  -0.384 -1.37   -1.23  
##  6  1.00    0.451  0.622  0.547   0.625  -0.181   0.475 -0.396   0.546 
##  7  0.159  -1.07   1.77  -2.65    2.07    0.314   0.332  0.0922  1.05  
##  8  0.475   0.457 -0.835  0.0191 -0.495  -1.18   -0.656 -1.11   -0.879 
##  9 -0.433  -1.34  -0.361  1.42    0.110  -0.132   0.953  1.27    0.397 
## 10  0.0617  0.392  1.67  -0.315  -0.438   1.03   -0.762 -0.0156 -2.25  
## # ... with 20 more rows, and 7 more variables: V10 &lt;dbl&gt;, V11 &lt;dbl&gt;,
## #   V12 &lt;dbl&gt;, V13 &lt;dbl&gt;, V14 &lt;dbl&gt;, V15 &lt;dbl&gt;, V16 &lt;dbl&gt;</code></pre></div>
<p>To evaluate the quality for a factor analysis solution Kaiser proposed the <a href="https://link.springer.com/article/10.1007/BF02291575">Index of Factorial Simplicity</a> (IFS). The IFS is computed as</p>
<p><span class="math display">\[ IFS = \frac{∑_i\big[q ∑_sv_js^4-(∑_sv_{js}^2)^2\big]}{∑_i\big[(q-1)(∑_sv_{js}^2)^2 \big]} \tag{6}\]</span></p>
<p>where <span class="math inline">\(q\)</span> is the number of factors, <span class="math inline">\(j\)</span> the row index, <span class="math inline">\(s\)</span> the column index, and <span class="math inline">\(v_{js}\)</span> is the value in the loadings matrix. Furthermore, Kaiser created the following evaluations of the score produced by the IFS as shown below:</p>
<ol style="list-style-type: decimal">
<li>In the .90s: Marvelous</li>
<li>In the .80s: Meritorious</li>
<li>In the .70s: Middling</li>
<li>In the .60s: Mediocre</li>
<li>In the .50s: Miserable</li>
<li>&lt; .50: Unacceptable</li>
</ol>
<p>Thus, to assess the quality of our factor analysis results we apply <code>kaisers_index</code> to the rotated factor loadings and as the results show below our output value of 0.702 suggests that our results are “middling”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis.html">factor_analysis</a></span>(<span class="dt">data =</span> state_vec, <span class="dt">hc_points =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis_results.html">factor_analysis_results</a></span>(fa_loadings_rotated) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/kaisers_index.html">kaisers_index</a></span>()
## [1] 0.6182339</code></pre></div>
<p>We can visualize the factor analysis results to show the correlation between the columns of the reduced state vector to the rotated factor loadings. Strong negative correlations are depicted as red while strong positive correlations are shown as blue. This helps to identify which factors are correlated with each security log data attribute. Furthermore, this helps to identify two or more security log data attributes that appear to have relationships with their occurrences. For example, this shows that Russia is highly correlated with IP address 223.70.128. If there is an abnormally large amount of instances with Russian occurrances this would be the logical IP address to start investigating.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fa_loadings &lt;-<span class="st"> </span>state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis.html">factor_analysis</a></span>(state_vec, <span class="dt">hc_points =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis_results.html">factor_analysis_results</a></span>(fa_loadings_rotated)

<span class="kw">row.names</span>(fa_loadings) &lt;-<span class="st"> </span><span class="kw">colnames</span>(state_vec)

gplots<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/gplots/topics/heatmap.2">heatmap.2</a></span>(fa_loadings, <span class="dt">dendrogram =</span> <span class="st">'both'</span>, <span class="dt">trace =</span> <span class="st">'none'</span>, 
            <span class="dt">density.info =</span> <span class="st">'none'</span>, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dt">by =</span> .<span class="dv">25</span>), 
            <span class="dt">col =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">'RdBu'</span>))</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We can also visualize the rotated factor score plots to see which time blocks appear to be outliers and deserve closer attention.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/horns_curve.html">horns_curve</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis.html">factor_analysis</a></span>(state_vec, <span class="dt">hc_points =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/factor_analysis_results.html">factor_analysis_results</a></span>(fa_scores_rotated) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">Block =</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/gather">gather</a></span>(Factor, Score, <span class="op">-</span>Block) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">Absolute_Score =</span> <span class="kw">abs</span>(Score)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(Factor, Absolute_Score, <span class="dt">label =</span> Block)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_text">geom_text</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_boxplot">geom_boxplot</a></span>(<span class="dt">outlier.shape =</span> <span class="ot">NA</span>)</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<p>This allows us to look across the factors and identify outlier blocks that may require further intra-block analysis. If we assume that an absolute rotated factor score <span class="math inline">\(\geq\)</span> 2 represents our outlier cut-off then we see that time blocks 4, 13, 15, 17, 24, 26, and 27 require further investigation. We saw block 17 being highlighted with the <code>mahalanobis_distance</code> earlier but these other time blocks were not as obvious so by performing and comparing these multiple anomaly detection approaches we can gain greater insights and confirmation.</p>
<p>An alternative, yet similar approach to factor analysis is principal component analysis. The goal in factor analysis is to explain the covariances or correlations between the variables. By contrast, the goal of principal component analysis is to explain as much of the total variance in the variables as possible. Thus, The first principal component of a set of features <span class="math inline">\(X_1, X_2,\dots,X_p\)</span> is the normalized linear combination of the features</p>
<p><span class="math display">\[ Z_1 = \phi_{11}X_1 + \phi_{21}X_2 + \cdots + \phi_{p1}X_p \tag{7}\]</span></p>
<p>that has the largest variance. By <em>normalized</em>, we mean that <span class="math inline">\(\sum^p_{j=1} \phi^2_{j1} = 1\)</span>. We refer to the elements <span class="math inline">\(\phi_{11},\dots,\phi_{p1}\)</span> as the loadings of the first principal component; together, the loadings make up the principal component loading vector, <span class="math inline">\(\phi_1 = (\phi_{11}, \phi_{21}, \dots, \phi_{p1})^T\)</span>. The loadings are constrained so that their sum of squares is equal to one, since otherwise setting these elements to be arbitrarily large in absolute value could result in an arbitrarily large variance. After the first principal component <span class="math inline">\(Z_1\)</span> of the features has been determined, we can find the second principal component <span class="math inline">\(Z_2\)</span>. The second principal component is the linear combination of <span class="math inline">\(X_1,\dots,X_p\)</span> that has maximal variance out of all linear combinations that are uncorrelated with <span class="math inline">\(Z_1\)</span>. The second principal component scores <span class="math inline">\(z_{12}, z_{22},\dots,z_{n2}\)</span> take the form</p>
<p><span class="math display">\[z_{12} = \phi_{12}x_{i1} + \phi_{22}x_{i2} + \cdots + \phi_{p2}x_{ip} \tag{8} \]</span></p>
<p>where <span class="math inline">\(\phi_2\)</span> is the second principal loading vector, with elements <span class="math inline">\(\phi_{12}, \phi_{22}, \dots, \phi_{p2}\)</span>. This continues until all principal components have been computed. To perform a principal components analysis we use <code>principal_components</code> which will create a list containing:</p>
<ol style="list-style-type: decimal">
<li>
<code>pca_sdev</code>: the standard deviations of the principal components (i.e., the square roots of the eigenvalues of the covariance/correlation matrix, though the calculation is actually done with the singular values of the data matrix).</li>
<li>
<code>pca_loadings</code>: the matrix of variable loadings (i.e., a matrix whose columns contain the eigenvectors).</li>
<li>
<code>pca_rotated</code>: the value of the rotated data (the centered, and scaled if requested, data multiplied by the rotation matrix) is returned.</li>
<li>
<code>pca_center</code>: the centering used.</li>
<li>
<code>pca_scale</code>: a logical response indicating whether scaling was used.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/principal_components.html">principal_components</a></span>(state_vec) <span class="op">%&gt;%</span><span class="st"> </span>str
## List of 5
##  $ pca_sdev    : num [1:30] 2.86 2.7 2.42 2.17 2.1 ...
##  $ pca_loadings: num [1:49, 1:30] -0.127826 0.22575 0.005505 -0.000462 0.008383 ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : chr [1:49] "ASA" "Attempt" "Bytes_TRF_102" "Bytes_TRF_120" ...
##   .. ..$ : chr [1:30] "PC1" "PC2" "PC3" "PC4" ...
##  $ pca_rotated : num [1:30, 1:30] 4.708 1.094 0.724 -4.889 1.351 ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : NULL
##   .. ..$ : chr [1:30] "PC1" "PC2" "PC3" "PC4" ...
##  $ pca_center  : Named num [1:49] 1.633 3.467 0.133 0.167 0.133 ...
##   ..- attr(*, "names")= chr [1:49] "ASA" "Attempt" "Bytes_TRF_102" "Bytes_TRF_120" ...
##  $ pca_scale   : logi FALSE</code></pre></div>
<p>For easy access to these results we can use the <code>principal_components_result</code> parsing function. The <code>principal_components_result</code> will parse the results either by their list name or by location. For instance to extract the computed component scores as outlined in Eq. 8 you can use <code><a href="../reference/principal_components_result.html">principal_components_result(data, results = pca_rotated)</a></code> or <code><a href="../reference/principal_components_result.html">principal_components_result(data, results = 3)</a></code> as demonstrated below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_vec <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/principal_components.html">principal_components</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/principal_components_result.html">principal_components_result</a></span>(pca_rotated) <span class="op">%&gt;%</span>
<span class="st">  </span>as_tibble
## # A tibble: 30 x 30
##       PC1    PC2    PC3    PC4    PC5    PC6    PC7    PC8     PC9    PC10
##     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1  4.71  -2.07   0.733 -2.41   2.30  -1.05   2.32  -0.785 -1.07    1.87  
##  2  1.09  -3.01  -2.10  -0.496 -0.318  4.56  -1.75   1.97  -2.68   -2.34  
##  3  0.724 -3.42  -0.519  2.67  -0.156 -1.30   0.786 -0.641 -1.24   -0.0424
##  4 -4.89   3.74  -3.25   2.02  -1.47   0.738 -1.25  -0.772  2.32    2.95  
##  5  1.35   2.90  -2.05   0.582  1.32   1.03   0.598 -3.01   0.485  -0.942 
##  6  2.85   0.678 -0.751 -0.977  0.949 -0.258  3.04  -0.177  1.34   -0.570 
##  7 -1.59   2.65   0.328  3.16   4.04  -2.35  -2.54   0.235 -0.787  -1.79  
##  8 -1.73  -3.82   0.784 -0.271  1.90  -1.59   0.487  1.16  -0.0659  3.19  
##  9  1.42   1.34   0.217  3.43  -2.83   2.58  -1.78   1.33  -2.29   -0.688 
## 10  2.95  -3.00  -5.72  -0.248  0.478 -1.65  -1.06  -3.37   0.664  -0.492 
## # ... with 20 more rows, and 20 more variables: PC11 &lt;dbl&gt;, PC12 &lt;dbl&gt;,
## #   PC13 &lt;dbl&gt;, PC14 &lt;dbl&gt;, PC15 &lt;dbl&gt;, PC16 &lt;dbl&gt;, PC17 &lt;dbl&gt;,
## #   PC18 &lt;dbl&gt;, PC19 &lt;dbl&gt;, PC20 &lt;dbl&gt;, PC21 &lt;dbl&gt;, PC22 &lt;dbl&gt;,
## #   PC23 &lt;dbl&gt;, PC24 &lt;dbl&gt;, PC25 &lt;dbl&gt;, PC26 &lt;dbl&gt;, PC27 &lt;dbl&gt;,
## #   PC28 &lt;dbl&gt;, PC29 &lt;dbl&gt;, PC30 &lt;dbl&gt;</code></pre></div>
<p>We could then follow up the principal component analysis with similar visualization activities as performed post factor analysis to identify potential anomalies.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#functions">Functions</a></li>
      <li><a href="#state-vector-creation">State Vector Creation</a></li>
      <li><a href="#multicollinearity-adjustment">Multicollinearity Adjustment</a></li>
      <li><a href="#multivariate-statistical-analyses">Multivariate Statistical Analyses</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Bradley Boehmke, Brandon Greenwell, Jason Freels, Robert Gutierrez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
